streamlit
pandas
folium
geopy
gspread
oauth2client
streamlit-folium

st.set_page_config(
    page_title="EV Charger Marketplace - Karachi",
    page_icon="ðŸ”Œ",
    layout="wide"
)

@st.cache_resource
def get_google_sheet():
    try:
        scope = ["https://spreadsheets.google.com/feeds", "https://www.googleapis.com/auth/drive"]
        creds = ServiceAccountCredentials.from_json_keyfile_name("ev-charger-key.json", scope)
        client = gspread.authorize(creds)
        sheet = client.open("ev_chargers").sheet1
        return sheet
    except Exception as e:
        st.error(f"Error connecting to Google Sheets: {str(e)}")
        return None 

col1, col2 = st.columns(2)
with col1:
    lat = st.number_input("Latitude", format="%.6f", min_value=24.0, max_value=25.0)
with col2:
    lon = st.number_input("Longitude", format="%.6f", min_value=66.0, max_value=68.0)

type_ = st.selectbox("Charger Type", ["Type 1", "Type 2", "CCS", "CHAdeMO", "Tesla Supercharger"]) 

st.markdown(f"""
#### {row['name']}
- **Distance:** {row['distance_km']:.1f} km
- **Price:** Rs. {row['price']}/hour
- **Type:** {row['type']}
- **Contact:** {row['contact']}
---
""") 

if len(df) == 0:
    st.warning("No charging stations available yet. Be the first to add one!") 

if not all([name, lat, lon, price, type_, contact]):
    st.error("Please fill in all fields!") 

try:
    sheet.append_row([name, lat, lon, price, type_, contact])
    st.success("âœ… Charger added successfully!")
    time.sleep(1)
    st.experimental_rerun()
except Exception as e:
    st.error(f"Error adding charger: {str(e)}") 